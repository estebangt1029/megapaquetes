<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Listar Usuarios</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      :root {
        --color-fondo-principal: #000000; /* Color de fondo principal */
        --color-texto-principal: #ffffff; /* Color de texto principal */
        --color-primario: #99e89d; /* Color primario */
        --color-secundario: #006633; /* Color secundario */
        --color-terciario: #4da768; /* Color terciario */
        --color-acento-1: #26874e; /* Color de acento 1 */
        --color-acento-2: #257236; /* Color de acento 2 */
        --color-resaltado: #3bc975; /* Color de resaltado */
        --padding: 30px; /* Padding común */
        --paddin-button: 10px; /* Padding para botones */
        --margin-top: 30px; /* Margen superior */
      }
      body {
        min-height: 100vh;
        background-image: url(../../imagenes/fondo\ seccion\ 3.jpg);
        background-repeat: no-repeat;
        background-size: cover;
        background-position: bottom;
        padding-bottom: 20px;
      }
      /*PARTE DEL MENU DE NAVEGACION*/

      .navbar {
        max-width: 100vw;
        display: flex; /* Mostrar como flexbox */
        align-items: center; /* Centrar elementos verticalmente */
        justify-content: space-between; /* Espacio entre elementos */
        background-color: var(--color-primario); /* Color de fondo */
        padding: 18px 30px; /* Padding interno */
        flex-wrap: wrap; /* Permitir envolver elementos en pantalla pequeña */
      }

      .negrita {
        font-weight: bold; /* Define el texto en negrita */
        font-size: 16px; /* Establece el tamaño de la fuente a 16 píxeles */
      }

      .navbar__logo img {
        height: 40px; /* Altura del logo */
      }

      .navbar__contenedor {
        display: flex; /* Mostrar como flexbox */
        flex-direction: column; /* Dirección de columna para el contenido */
        color: var(--color-fondo-principal); /* Color de texto */
      }

      .navbar__title {
        font-size: 16px; /* Tamaño del título */
      }

      .navbar__subtitle {
        font-size: 11px; /* Tamaño del subtítulo */
      }

      .navbar__link,
      .menu__toggle {
        color: var(--color-fondo-principal); /* Color del enlace */
        padding: 14px 20px; /* Padding del enlace */
        font-size: 16px; /* Tamaño de fuente del enlace */
        text-decoration: none; /* Sin decoración de texto */
        font-weight: bold; /* Peso de la fuente */
      }

      .nav-link:hover,
      .menu__toggle:hover {
        color: var(--color-acento-1); /* Color al pasar el mouse */
      }

      .navbar__link:active,
      .menu__toggle:active {
        color: var(--color-secundario); /* Color al hacer clic */
        text-decoration: underline solid; /* Subrayado sólido al hacer clic */
      }

      /* Menú desplegable */
      .menu {
        position: relative; /* Posición relativa */
        display: inline-block; /* Mostrar como bloque en línea */
      }

      .menu__container {
        display: none; /* Ocultar contenedor por defecto */
        position: absolute; /* Posición absoluta */
        top: 100%; /* Alinear en la parte inferior del elemento padre */
        left: 0; /* Alinear a la izquierda */
        background-color: var(--color-secundario); /* Color de fondo del menú */
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2); /* Sombra */
        z-index: 1; /* Índice de apilamiento */
        text-align: left; /* Alinear texto a la izquierda */
      }

      .menu__container h2 {
        color: var(--color-texto-principal); /* Color del título */
        margin: 10px; /* Margen */
      }

      .menu__link {
        color: var(--color-texto-principal); /* Color del enlace */
        padding: 12px 16px; /* Padding del enlace */
        text-decoration: none; /* Sin decoración de texto */
        display: block; /* Bloque de visualización */
      }

      .menu__link:hover {
        background-color: var(
          --color-terciario
        ); /* Color de fondo al pasar el mouse */
      }

      .menu__link:active {
        background-color: var(
          --color-acento-2
        ); /* Color de fondo al hacer clic */
      }

      .menu__toggle:hover + .menu__container,
      .menu__container:hover {
        display: block; /* Mostrar menú al pasar el mouse */
      }

      .menu__vector {
        margin: 10px; /* Margen */
      }

      .menu__heading {
        margin: 10px 0; /* Margen superior e inferior */
      }

      /* Estilos para el menú desplegable */

      li .dropdown-item:hover {
        background-color: var(
          --color-primario
        ); /* Color de fondo al pasar el mouse */
      }

      li .dropdown-item:active {
        background-color: var(
          --color-resaltado
        ); /* Color de fondo al hacer clic */
      }

      /* Estilos para los botones */

      .btn.btn-light.button.d-flex.align-items-center:hover {
        background-color: var(
          --color-terciario
        ); /* Color de fondo al pasar el mouse */
        border: none; /* Elimina el borde */
      }

      .btn.btn-light.button.d-flex.align-items-center:active {
        background-color: var(
          --color-acento-1
        ); /* Color de fondo al hacer clic */
        border: none; /* Elimina el borde */
      }

      .menu_perfil {
        display: none;
      }

      .estilos {
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        animation: animation 0.5s ease forwards;
      }

      @keyframes animation {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .opciones > a {
        animation: texto 1s ease forwards;
      }

      @keyframes texto {
        from {
          transform: translateY(15px);
        }
        to {
          transform: translateY(0px);
        }
      }

      .contenido {
        width: 100vw;
        height: 50vh;
        background-color: #006633;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }

      .img-salir {
        position: absolute;
        right: 5%;
        top: 30%;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <!-- Barra de navegación -->
    <nav class="negrita navbar navbar-expand-lg p-4">
      <div class="container-fluid d-flex">
        <!-- Logo -->
        <img src="../../imagenes/logo.svg" alt="logo" />
        <div class="px-4">
          <a class="nav-link active" href="../../index.html">MEGAPAQUETES</a>
          <div class="esconder">
            <!-- Contenido escondido -->
          </div>
        </div>
        <!-- Botón para mostrar el menú en pantallas pequeñas -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- Contenedor del menú desplegable -->
        <div
          class="collapse navbar-collapse justify-content-center"
          id="navbarSupportedContent"
        >
          <ul
            class="navbar-nav d-flex gap-5 justify-content-center align-items-center"
          >
            <!-- Elementos del menú -->
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="../index.html"
                >Inicio</a
              >
            </li>
            <!-- Elemento de menú con dropdown -->
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle active"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Megamenu
              </a>
              <!-- Menú desplegable -->
              <ul class="dropdown-menu bg-success text-light">
                <li class="px-2">MEGAPAQUETES</li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                    class="dropdown-item text-light"
                    href="../productos/verduras_productos.html"
                    >Verduras</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item text-light"
                    href="../productos/frutas_productos.html"
                    >Frutas</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item text-light"
                    href="../productos/tubérculos_hortalizas_productos.html"
                    >Tubérculos/Hortalizas</a
                  >
                </li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#">Ofertas</a>
            </li>
            <!-- Elemento de menú con dropdown -->
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle active"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Sobre Nosotros
              </a>
              <!-- Menú desplegable -->
              <ul class="dropdown-menu bg-success text-light">
                <li class="px-2">MEGAPAQUETES</li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                    class="dropdown-item text-light"
                    href="../sobre nosotros/sobre nosotros.html"
                    >Sobre Nosotros</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item text-light"
                    href="../sobre nosotros/Contacto.html"
                    >Contacto</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item text-light"
                    href="../sobre nosotros/Politicas.html"
                    >Politicas(Terminos y Condiciones)</a
                  >
                </li>
              </ul>
            </li>
            <!-- Ícono de carrito de compras (deshabilitado) -->
            <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="25"
                  height="25"
                  fill="currentColor"
                  class="bi bi-cart4"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"
                  />
                </svg>
              </a>
            </li>
            <div class="d-flex gap-5 botones">
              <a
                href="#"
                class="desplegable d-flex align-items-center justify-content-center gap-2 nav-link"
                type="submit"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  fill="dark"
                  class="bi bi-person-circle"
                  viewBox="0 0 16 16"
                >
                  <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                  <path
                    fill-rule="evenodd"
                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"
                  />
                </svg>
                <h5 id="loggedInUserName"></h5>
              </a>
            </div>
          </ul>
        </div>
      </div>
    </nav>

    <div class="menu_perfil">
      <div class="contenido">
        <a href="listar.html">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            fill="dark"
            class="bi bi-x-lg img-salir"
            viewBox="0 0 16 16"
          >
            <path
              d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"
            />
          </svg>
        </a>
        <div class="opciones">
          <a href="" class="nav-link">
            <h3>Megapaquetes</h3>
          </a>
          <a class="nav-link" href="../../usuarios/perfil_usuario.html"
            >Perfil</a
          >
          <a class="nav-link" href="../../index.html">Cerrar Sesion</a>
        </div>
      </div>
    </div>

    <div class="container mt-5">
      <h2 class="mb-4 text-center text-success">Gestión de Usuarios</h2>
      <div class="border border-success w-100 mb-5"></div>
      <a href="crear.html" class="btn btn-success w-100 mb-2">Crear Usuario</a>
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>Nombres</th>
              <th>Apellidos</th>
              <th>Correo</th>
              <th>Teléfono</th>
              <th>Dirección</th>
              <th>Descripción</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="user-table-body">
            <!-- Las filas de los usuarios se agregarán aquí -->
          </tbody>
        </table>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const userTableBody = document.getElementById("user-table-body");
        let users = JSON.parse(localStorage.getItem("users")) || [];

        function renderUsers() {
          userTableBody.innerHTML = ""; // Limpiar la tabla antes de renderizar
          users.forEach((user, index) => {
            const row = document.createElement("tr");

            row.innerHTML = `
                        <td>${user.fullName}</td>
                        <td>${user.lastName}</td>
                        <td>${user.email}</td>
                        <td>${user.phone}</td>
                        <td>${user.address}</td>
                        <td>${user.description}</td>
                        <td class="d-flex align-items-center justify-content-center">
                            <a href="actualizar.html?index=${index}" class="mr-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="orange" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                                </svg>    
                            </a>
                            <a href="#" class="delete-user" data-index="${index}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="red" class="bi bi-trash" viewBox="0 0 16 16">
                                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                                    <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                                </svg> 
                            </a>
                        </td>
                    `;

            userTableBody.appendChild(row);
          });

          // Añadir eventos de eliminación
          const deleteButtons = document.querySelectorAll(".delete-user");
          deleteButtons.forEach((button) => {
            button.addEventListener("click", (event) => {
              event.preventDefault();
              const index = button.getAttribute("data-index");
              users.splice(index, 1); // Eliminar el usuario del array
              localStorage.setItem("users", JSON.stringify(users)); // Actualizar el localStorage
              renderUsers(); // Volver a renderizar la tabla
            });
          });
        }

        const loggedInUserName = JSON.parse(
          localStorage.getItem("loggedInUser")
        );
        if (loggedInUserName) {
          document.getElementById("loggedInUserName").textContent =
            loggedInUserName.nombres + " " + loggedInUserName.apellidos;
        }

        renderUsers();
      });

      const salir = document.querySelector(".img-salir");
      const menu = document.querySelector(".menu_perfil");
      const desplegable = document.querySelector(".desplegable");

      desplegable.addEventListener("click", () => {
        menu.classList.add("estilos");
      });

      salir.addEventListener("click", () => {
        menu.style.display = "none";
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <!-- Bootstrap Bundle JS desde CDN -->
  </body>
</html>
